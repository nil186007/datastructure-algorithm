<mxfile host="app.diagrams.net" modified="2022-07-05T09:08:33.290Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15" etag="0KIBpTs-p9Kl9pAIL3Dl" version="20.0.4" type="github">
  <diagram id="w3xWAHxM6hMif5GmvVi4" name="Page-1">
    <mxGraphModel dx="793" dy="618" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VY6cc99BuFBR4iTMat-C-2" value="&lt;h1&gt;Amazon (E-commerce)&lt;/h1&gt;&lt;h3&gt;Functional Requirements :&amp;nbsp;&lt;/h3&gt;&lt;p&gt;1. User login&lt;/p&gt;&lt;p&gt;2. user search a product&lt;/p&gt;&lt;p&gt;3. recomendation&amp;nbsp;&lt;/p&gt;&lt;p&gt;4. delivery time&lt;/p&gt;&lt;p&gt;5. Cart having all selected product&lt;/p&gt;&lt;p&gt;6. checkout the cart and payment&lt;/p&gt;&lt;p&gt;7. view order&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h3&gt;Non Functional requirements :&lt;/h3&gt;&lt;p&gt;1. All payment related services should be highly consistent&lt;/p&gt;&lt;p&gt;2. User search should be highly available&lt;/p&gt;&lt;p&gt;3. latency should less user facing services&lt;/p&gt;&lt;p&gt;4. number of daily active user&lt;/p&gt;&lt;p&gt;5. daily number of order placed&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="10" y="28" width="260" height="492" as="geometry" />
        </mxCell>
        <mxCell id="Yt1-9T4JXmfCghfN-qr9-30" value="&lt;h3&gt;RDBMS&lt;/h3&gt;&lt;p&gt;1. RDBMS are not good for hierarchical data. Good for flat data structure&lt;/p&gt;&lt;p&gt;2. Parent child relationship also not naturally present&amp;nbsp;&lt;/p&gt;&lt;p&gt;3. Hierarchical data has single parent and zero or more children&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;example hierarchy -&lt;/p&gt;&lt;p&gt;---&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;&quot;&gt;	Electronics/Televiosn/LCD&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;&quot;&gt;Electronics/Televiosn/LED&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;&quot;&gt;Electronics/Televiosn/QLED&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Electronics/Televiosn/OLED&lt;span style=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Electronics/Mobile/smarts&lt;/p&gt;&lt;p&gt;Electronics/Mobile/features&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h3&gt;Adjacency List Model Schema :&amp;nbsp;&lt;/h3&gt;&lt;p&gt;// each item in the table contians immediate parent id&lt;/p&gt;&lt;p&gt;CREATE TABLE Category (catID, name, parentCatID);&lt;/p&gt;&lt;p&gt;Getting data by doing self join&lt;/p&gt;&lt;p&gt;select t1.name as l1, t2.name as l2, t3.name as l3, t4.name as l4&lt;/p&gt;&lt;p&gt;From category as t1&lt;/p&gt;&lt;p&gt;Left &amp;nbsp;JOIN category as t2 ON t2.aprent=t1.category_id&lt;/p&gt;&lt;p&gt;Left &amp;nbsp;JOIN category as t3 ON t3.aprent=t2.category_id&lt;br&gt;&lt;/p&gt;&lt;p&gt;Left &amp;nbsp;JOIN category as t4 ON t4.aprent=t3.category_id&lt;br&gt;&lt;/p&gt;&lt;p&gt;WHERE t1.name=&quot;ELECTRONICs&#39;;&lt;/p&gt;&lt;pre style=&quot;font-size: 16px; box-sizing: inherit; font-family: Inconsolata, monospace; border: 1px solid rgb(209, 209, 209); line-height: 1.3125; margin-top: 0px; margin-bottom: 1.75em; max-width: 100%; overflow: auto; padding: 1.75em; overflow-wrap: break-word; color: rgb(26, 26, 26); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); text-decoration-thickness: initial;&quot; class=&quot;samplecode&quot;&gt;+-------------+----------------------+--------+&lt;br&gt;| category_id | name                 | parent |&lt;br&gt;+-------------+----------------------+--------+&lt;br&gt;|           1 | ELECTRONICS          |   NULL |&lt;br&gt;|           2 | TELEVISIONS          |      1 |&lt;br&gt;|           3 | TUBE                 |      2 |&lt;br&gt;|           4 | LCD                  |      2 |&lt;br&gt;|           5 | PLASMA               |      2 |&lt;br&gt;|           6 | PORTABLE ELECTRONICS |      1 |&lt;br&gt;|           7 | MP3 PLAYERS          |      6 |&lt;br&gt;|           8 | FLASH                |      7 |&lt;br&gt;|           9 | CD PLAYERS           |      6 |&lt;br&gt;|          10 | 2 WAY RADIOS         |      6 |&lt;br&gt;+-------------+----------------------+--------+&lt;/pre&gt;&lt;h4&gt;limitation - need self join for every level in the hierarchy and performance will get impacted&lt;/h4&gt;&lt;p&gt;all levels needs to knows before hand&lt;/p&gt;&lt;p&gt;deleting row show take care so that orphan row does not get created&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h3&gt;The Nested Set Model&amp;nbsp;&lt;/h3&gt;&lt;pre style=&quot;font-size: 16px; box-sizing: inherit; font-family: Inconsolata, monospace; border: 1px solid rgb(209, 209, 209); line-height: 1.3125; margin-top: 0px; margin-bottom: 1.75em; max-width: 100%; overflow: auto; padding: 1.75em; overflow-wrap: break-word; color: rgb(26, 26, 26); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); text-decoration-thickness: initial;&quot; class=&quot;samplecode&quot;&gt;CREATE TABLE nested_category (&lt;br&gt;        category_id INT AUTO_INCREMENT PRIMARY KEY,&lt;br&gt;        name VARCHAR(20) NOT NULL,&lt;br&gt;        lft INT NOT NULL,&lt;br&gt;        rgt INT NOT NULL&lt;br&gt;);&lt;/pre&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="354" y="100" width="850" height="1750" as="geometry" />
        </mxCell>
        <mxCell id="Yt1-9T4JXmfCghfN-qr9-44" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=http://mikehillyer.com/media//nested_numbered.png;" vertex="1" parent="1">
          <mxGeometry x="930" y="1050" width="520" height="157" as="geometry" />
        </mxCell>
        <mxCell id="Yt1-9T4JXmfCghfN-qr9-45" value="&lt;pre style=&quot;font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; box-sizing: inherit; font-family: Inconsolata, monospace; border: 1px solid rgb(209, 209, 209); line-height: 1.3125; margin: 0px 0px 1.75em; max-width: 100%; overflow: auto; padding: 1.75em; overflow-wrap: break-word; color: rgb(26, 26, 26); font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); text-decoration-thickness: initial;&quot; class=&quot;samplecode&quot;&gt;+-------------+----------------------+-----+-----+&#xa;| category_id | name                 | lft | rgt |&#xa;+-------------+----------------------+-----+-----+&#xa;|           1 | ELECTRONICS          |   1 |  20 |&#xa;|           2 | TELEVISIONS          |   2 |   9 |&#xa;|           3 | TUBE                 |   3 |   4 |&#xa;|           4 | LCD                  |   5 |   6 |&#xa;|           5 | PLASMA               |   7 |   8 |&#xa;|           6 | PORTABLE ELECTRONICS |  10 |  19 |&#xa;|           7 | MP3 PLAYERS          |  11 |  14 |&#xa;|           8 | FLASH                |  12 |  13 |&#xa;|           9 | CD PLAYERS           |  15 |  16 |&#xa;|          10 | 2 WAY RADIOS         |  17 |  18 |&#xa;+-------------+----------------------+-----+-----+&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="1480" width="560" height="420" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
